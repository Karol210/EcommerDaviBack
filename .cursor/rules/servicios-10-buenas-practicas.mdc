---
description: Buenas pr√°cticas Clean Code - SRP, constantes, m√©todos peque√±os, c√≥digo limpio
globs: ["**/*.java"]
alwaysApply: true
---

# üßπ Buenas Pr√°cticas - Clean Code en Servicios

## üìã TL;DR

- ‚úÖ **CR√çTICO**: Eliminar imports sin usar en CADA clase/interfaz ANTES de guardar cambios
- ‚úÖ Constantes: Strings literales ‚Üí `Constants.java` con c√≥digos de error `ED-XXX-NN` (Ecommerce Davivienda - Capa/M√≥dulo - N√∫mero)
- ‚úÖ SRP: Un m√©todo = Una responsabilidad ‚Ä¢ M√©todos < 20 l√≠neas ‚Ä¢ Una clase = Una responsabilidad (‚â•2 capacidades ‚Üí separar)
- ‚úÖ Nombres descriptivos: `extractCredentials()`, `buildSuccessBody()` vs `process()`, `handle()`
- ‚úÖ DRY: `ObjectMapper` como campo reutilizable ‚Ä¢ Sin instancias m√∫ltiples
- ‚úÖ Separaci√≥n de capacidades: Validaci√≥n, Builder, etc. en carpetas propias con interfaces
- ‚úÖ C√≥digo limpio: Eliminar m√©todos privados, constantes y variables sin usar ‚Ä¢ Revisar flujo completo peri√≥dicamente
- ‚ùå NO hardcodear strings ‚Ä¢ NO m√©todos > 50 l√≠neas ‚Ä¢ NO m√∫ltiples responsabilidades ‚Ä¢ NO c√≥digo sin usar

## üö® Reglas Principales

1. **Imports Sin Usar (OBLIGATORIO)**: Eliminar imports sin usar en CADA clase e interfaz ANTES de guardar cambios ‚Ä¢ Aplica a Controllers, Services, DTOs, Mappers, etc.
2. **Constantes Centralizadas**: Strings literales, mensajes de error y c√≥digos en `Constants.java` con formato `ED-XXX-NN` (Ecommerce Davivienda - Capa/M√≥dulo - N√∫mero)
3. **Single Responsibility Principle**: Cada m√©todo tiene UNA responsabilidad ‚Ä¢ M√°ximo 20 l√≠neas ‚Ä¢ Cada clase tiene UNA responsabilidad (‚â•2 capacidades ‚Üí separar en carpetas)
4. **Nombres Descriptivos**: M√©todos que explican QU√â hacen sin comentarios ‚Ä¢ Variables con contexto completo
5. **Reutilizaci√≥n**: `ObjectMapper`, validadores y utilities como campos inyectados ‚Ä¢ NO crear instancias m√∫ltiples
6. **Logs Informativos**: `log.info` para eventos principales, `log.debug` para detalles, `log.error` con contexto completo
7. **Separaci√≥n de Capacidades**: Organizar por responsabilidades en carpetas (validation/, builder/, etc.) cuando hay ‚â•2 capacidades diferentes
8. **C√≥digo Limpio**: Eliminar peri√≥dicamente m√©todos privados, constantes y variables sin usar ‚Ä¢ Revisar flujo completo Controller ‚Üí Service ‚Üí Capacidades

## üìä Referencia R√°pida

### Limpieza de Imports (OBLIGATORIO para cada clase)

| Situaci√≥n | Qu√© hacer | Cu√°ndo |
|---|---|---|
| **Despu√©s de crear clase** | Eliminar imports auto-generados no usados | ‚úÖ ANTES de guardar |
| **Despu√©s de refactorizar** | Revisar imports que quedaron hu√©rfanos | ‚úÖ ANTES de guardar |
| **Despu√©s de eliminar c√≥digo** | Eliminar imports relacionados | ‚úÖ ANTES de guardar |
| **Antes de commit** | Verificar que NO hay imports sin usar | ‚úÖ OBLIGATORIO |

**¬øC√≥mo identificar imports sin usar?**
- IDE los muestra en gris o con warning
- No hay ninguna referencia a la clase en el archivo
- La clase fue eliminada pero el import qued√≥
- Se cambi√≥ implementaci√≥n y ya no se necesita

**Aplica a:**
- ‚úÖ Controllers (`@RestController`)
- ‚úÖ Services (`@Service`)
- ‚úÖ Service Interfaces
- ‚úÖ DTOs (clases con datos)
- ‚úÖ Mappers (`@Component`)
- ‚úÖ Exceptions (clases de error)
- ‚úÖ Configuration (`@Configuration`)
- ‚úÖ Filters y Components

### Extracci√≥n de Constantes

| Tipo | D√≥nde | Nomenclatura | Ejemplo |
|---|---|---|---|
| **Endpoints** | Clase local | `[NOMBRE]_ENDPOINT` | `LOGIN_ENDPOINT = "/api/v1/auth/login"` |
| **Campos JSON** | Clase local | `FIELD_[NOMBRE]` | `FIELD_EMAIL = "email"` |
| **Mensajes Error** | `Constants.java` | `ERROR_[CONTEXTO]_[ACCION]` | `ERROR_CREDENTIALS_READ` |
| **C√≥digos Error** | `Constants.java` | `CODE_[CONTEXTO]_[ACCION]` | `CODE_AUTHENTICATION_FAILED` |
| **Templates** | Clase local | `[NOMBRE]_TEMPLATE` | `SUCCESS_MESSAGE_TEMPLATE = "Hola %s"` |

### Formato de C√≥digos de Error

```
ED-XXX-NN
‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ N√∫mero secuencial (01-99)
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Capa/M√≥dulo (3 letras)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Ecommerce Davivienda
```

| M√≥dulo/Capa | Prefijo | Ejemplo |
|---|---|---|
| Authentication | `AUT` | `ED-AUT-01` |
| User | `USR` | `ED-USR-01` |
| Product | `PRO` | `ED-PRO-01` |
| Generic | `GEN` | `ED-GEN-01` |
| Parameters | `PAR` | `ED-PAR-01` |

### Single Responsibility Principle - L√≠mites

| Complejidad | L√≠neas | Acci√≥n |
|---|---|---|
| Simple | 1-10 | ‚úÖ Ideal |
| Media | 11-20 | ‚úÖ Aceptable |
| Alta | 21-50 | ‚ö†Ô∏è Refactorizar si es posible |
| Muy Alta | > 50 | üö® OBLIGATORIO refactorizar |

## ‚úÖ Ejemplos

### Ejemplo 1: Antes y Despu√©s - M√©todo con M√∫ltiples Responsabilidades

**‚ùå ANTES - Violaci√≥n de SRP (45 l√≠neas)**
```java
protected void successfulAuthentication(
        HttpServletRequest request, 
        HttpServletResponse response, 
        FilterChain chain,
        Authentication authResult) throws IOException {

    User user = (User) authResult.getPrincipal();
    String userName = user.getUsername();
    Collection<? extends GrantedAuthority> roles = authResult.getAuthorities();

    // Serializar authorities
    String authoritiesJson = new ObjectMapper().writeValueAsString(roles);  // ‚ùå Nueva instancia

    // Crear claims
    Claims claims = Jwts.claims()
            .add("authorities", authoritiesJson)  // ‚ùå String literal
            .add("username", userName)
            .build();

    // Generar token
    String token = Jwts.builder()
            .subject(userName)
            .claims(claims)
            .expiration(new Date(System.currentTimeMillis() + EXPIRATION_TIME))
            .issuedAt(new Date())
            .signWith(SECRET_KEY)
            .compact();

    // Agregar token al header
    response.addHeader(HEADER_AUTHORIZATION, PREFIX_TOKEN + token);

    // Crear body
    Map<String, Object> body = new HashMap<>();
    body.put("token", token);  // ‚ùå String literal
    body.put("username", userName);
    body.put("message", "Hola " + userName + ", has iniciado sesi√≥n");  // ‚ùå Hardcoded
    body.put("expiresIn", EXPIRATION_TIME);

    // Enviar respuesta
    response.getWriter().write(new ObjectMapper().writeValueAsString(body));  // ‚ùå Nueva instancia
    response.setContentType("application/json");  // ‚ùå String literal
    response.setStatus(200);  // ‚ùå Magic number

    log.info("Autenticaci√≥n exitosa para: {}", userName);
}
```

**‚úÖ DESPU√âS - SRP Aplicado (14 l√≠neas + 8 m√©todos auxiliares)**
```java
protected void successfulAuthentication(
        HttpServletRequest request, 
        HttpServletResponse response, 
        FilterChain chain,
        Authentication authResult) throws IOException {

    User user = (User) authResult.getPrincipal();
    String userName = user.getUsername();
    Collection<? extends GrantedAuthority> authorities = authResult.getAuthorities();

    log.info("Creando token para usuario: {} con roles: {}", userName, authorities);

    String token = generateJwtToken(userName, authorities);  // ‚úÖ M√©todo espec√≠fico
    
    addTokenToHeader(response, token);          // ‚úÖ M√©todo espec√≠fico
    writeSuccessResponse(response, token, userName);  // ‚úÖ M√©todo espec√≠fico

    log.info("Autenticaci√≥n exitosa para el usuario: {}", userName);
}

// ‚úÖ M√©todos auxiliares con responsabilidad √∫nica
private String generateJwtToken(String userName, Collection<? extends GrantedAuthority> authorities) 
        throws IOException {
    String authoritiesJson = objectMapper.writeValueAsString(authorities);  // ‚úÖ Campo reutilizable
    Claims claims = buildClaims(userName, authoritiesJson);
    return Jwts.builder()
            .subject(userName)
            .claims(claims)
            .expiration(new Date(System.currentTimeMillis() + EXPIRATION_TIME))
            .issuedAt(new Date())
            .signWith(SECRET_KEY)
            .compact();
}

private Claims buildClaims(String userName, String authoritiesJson) {
    return Jwts.claims()
            .add(FIELD_AUTHORITIES, authoritiesJson)  // ‚úÖ Constante
            .add(FIELD_USERNAME, userName)
            .build();
}

private void writeSuccessResponse(HttpServletResponse response, String token, String userName) 
        throws IOException {
    Map<String, Object> body = buildSuccessBody(token, userName);
    response.setContentType(CONTENT_TYPE);  // ‚úÖ Constante
    response.setStatus(HttpStatus.OK.value());  // ‚úÖ Enum
    response.getWriter().write(objectMapper.writeValueAsString(body));  // ‚úÖ Campo reutilizable
}

private Map<String, Object> buildSuccessBody(String token, String userName) {
    Map<String, Object> body = new HashMap<>();
    body.put(FIELD_TOKEN, token);  // ‚úÖ Constante
    body.put(FIELD_USERNAME, userName);
    body.put(FIELD_MESSAGE, String.format(SUCCESS_MESSAGE_TEMPLATE, userName));  // ‚úÖ Template
    body.put(FIELD_EXPIRES_IN, EXPIRATION_TIME);
    return body;
}
```

**Beneficios:**
- üéØ M√©todo principal: 45 l√≠neas ‚Üí **14 l√≠neas** (69% reducci√≥n)
- üéØ Cada m√©todo auxiliar < 15 l√≠neas
- üéØ F√°cil de testear individualmente
- üéØ Sin strings hardcodeados

### Ejemplo 2: Constantes en `Constants.java`

**‚ùå ANTES - Strings en m√∫ltiples clases**
```java
// JwtAuthenticationFilter.java
throw new RuntimeException("Error al leer credenciales del request", e);

// JwtValidationFilter.java
throw new RuntimeException("Error al leer credenciales del request", e);  // ‚ùå Duplicado

// UserServiceImpl.java
log.error("Error al leer credenciales del request");  // ‚ùå Duplicado
```

**‚úÖ DESPU√âS - Centralizado en Constants.java**
```java
// Constants.java
public class Constants {
    // ==================== AUTHENTICATION - ERROR MESSAGES ====================
    
    /**
     * Mensaje de error al leer credenciales del request.
     */
    public static final String ERROR_CREDENTIALS_READ = "Error al leer credenciales del request";
    
    /**
     * Mensaje de error de autenticaci√≥n fallida.
     */
    public static final String ERROR_AUTHENTICATION_FAILED = "Error en la autenticaci√≥n: credenciales incorrectas";

    // ==================== AUTHENTICATION - ERROR CODES ====================
    
    /**
     * C√≥digo de error: Error al leer credenciales.
     * Formato: ED-AUT-01 (Ecommerce Davivienda - Autenticaci√≥n - N√∫mero)
     */
    public static final String CODE_CREDENTIALS_READ_ERROR = "ED-AUT-01";
    
    /**
     * C√≥digo de error: Autenticaci√≥n fallida.
     * Formato: ED-AUT-02 (Ecommerce Davivienda - Autenticaci√≥n - N√∫mero)
     */
    public static final String CODE_AUTHENTICATION_FAILED = "ED-AUT-02";
}

// Uso en clases
import static com.ecommerce.davivienda.constants.Constants.*;

throw new RuntimeException(ERROR_CREDENTIALS_READ, e);  // ‚úÖ Centralizado
```

### Ejemplo 3: Nombres Descriptivos vs Gen√©ricos

| ‚ùå Nombre Gen√©rico | ‚úÖ Nombre Descriptivo | Responsabilidad |
|---|---|---|
| `process()` | `extractCredentials()` | Extrae credenciales del request |
| `handle()` | `createAuthenticationToken()` | Crea token de autenticaci√≥n |
| `execute()` | `generateJwtToken()` | Genera token JWT |
| `doWork()` | `writeSuccessResponse()` | Escribe respuesta exitosa |
| `buildData()` | `buildSuccessBody()` | Construye body de √©xito |
| `getData()` | `extractUserFromToken()` | Extrae usuario del token |

### Ejemplo 4: Separaci√≥n por Capacidades

**‚ùå ANTES - Todas las responsabilidades en una clase (122 l√≠neas)**
```java
@Service
public class JpaUserDetailsService implements UserDetailsService {
    private final UserRepository userRepository;

    @Override
    public UserDetails loadUserByUsername(String email) {
        User user = findUserByEmail(email);
        validateUserStatus(user, email);      // Responsabilidad 1: Validaci√≥n
        List<GrantedAuthority> authorities = buildAuthorities(user);  // Responsabilidad 2: Builder
        return buildUserDetails(user, authorities);  // Responsabilidad 3: Builder
    }
    
    private void validateUserStatus(User user, String email) { /* 15 l√≠neas */ }
    private void validateUserActive(User user, String email) { /* 10 l√≠neas */ }
    private void validateUserRole(User user, String email) { /* 12 l√≠neas */ }
    private List<GrantedAuthority> buildAuthorities(User user) { /* 5 l√≠neas */ }
    private UserDetails buildUserDetails(User user, List<GrantedAuthority> authorities) { /* 15 l√≠neas */ }
}
```

**‚úÖ DESPU√âS - Separaci√≥n por Capacidades (3 servicios independientes)**

**Estructura:**
```
service/detailsservice/
‚îú‚îÄ‚îÄ validation/
‚îÇ   ‚îú‚îÄ‚îÄ JpaUserValidationService.java              (Interface)
‚îÇ   ‚îî‚îÄ‚îÄ JpaUserValidationServiceImpl.java          (Validaci√≥n - 60 l√≠neas)
‚îú‚îÄ‚îÄ builder/
‚îÇ   ‚îú‚îÄ‚îÄ UserDetailsBuilderService.java             (Interface)
‚îÇ   ‚îî‚îÄ‚îÄ UserDetailsBuilderServiceImpl.java         (Construcci√≥n - 51 l√≠neas)
‚îú‚îÄ‚îÄ JpaUserDetailsService.java                     (Interface)
‚îî‚îÄ‚îÄ JpaUserDetailsServiceImpl.java                 (Coordinador - 74 l√≠neas)
```

**Coordinador limpio:**
```java
@Service
@RequiredArgsConstructor
public class JpaUserDetailsServiceImpl implements UserDetailsService {
    private final UserRepository userRepository;
    private final JpaUserValidationService validationService;     // ‚úÖ Capacidad inyectada
    private final UserDetailsBuilderService builderService;       // ‚úÖ Capacidad inyectada

    @Override
    @Transactional(readOnly = true)
    public UserDetails loadUserByUsername(String email) {
        User user = findUserByEmail(email);
        validationService.validateUserStatus(user, email);    // ‚úÖ Delega a capacidad
        return builderService.buildUserDetails(user);         // ‚úÖ Delega a capacidad
    }
    
    private User findUserByEmail(String email) { /* √önica responsabilidad local */ }
}
```

**Beneficios:**
- üéØ **Alta Cohesi√≥n**: Cada capacidad agrupa c√≥digo relacionado
- üéØ **Bajo Acoplamiento**: Cambios en validaci√≥n no afectan builder
- üéØ **Testeable**: Tests unitarios espec√≠ficos por capacidad
- üéØ **Reutilizable**: Capacidades pueden usarse en otros servicios
- üéØ **Escalable**: Agregar capacidades sin modificar existentes

### Ejemplo 5: Eliminar Imports Sin Usar (OBLIGATORIO)

**‚ùå ANTES - Imports sin usar en Controller**
```java
import com.ecommerce.davivienda.constants.Constants;
import com.ecommerce.davivienda.dto.user.PasswordChangeRequestDto;
import com.ecommerce.davivienda.dto.user.UserFilterDto;          // ‚ùå No usado
import com.ecommerce.davivienda.dto.user.UserRequestDto;
import com.ecommerce.davivienda.dto.user.UserResponseDto;
import com.ecommerce.davivienda.models.Response;
import com.ecommerce.davivienda.service.user.UserService;
import jakarta.validation.Valid;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.data.domain.Page;                      // ‚ùå No usado
import org.springframework.data.domain.PageRequest;               // ‚ùå No usado
import org.springframework.data.domain.Pageable;                  // ‚ùå No usado
import org.springframework.data.domain.Sort;                      // ‚ùå No usado
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;                                            // ‚ùå No usado

@RestController
@RequestMapping("/api/v1/users")
public class UserController {
    // ... endpoints sin paginaci√≥n
}
```

**‚úÖ DESPU√âS - Solo imports necesarios**
```java
import com.ecommerce.davivienda.constants.Constants;
import com.ecommerce.davivienda.dto.user.PasswordChangeRequestDto;
import com.ecommerce.davivienda.dto.user.UserRequestDto;
import com.ecommerce.davivienda.dto.user.UserResponseDto;
import com.ecommerce.davivienda.models.Response;
import com.ecommerce.davivienda.service.user.UserService;
import jakarta.validation.Valid;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api/v1/users")
public class UserController {
    // ... endpoints sin paginaci√≥n
}
```

**Beneficios:**
- üéØ **7 imports eliminados** (UserFilterDto, Page, PageRequest, Pageable, Sort, List)
- üéØ **C√≥digo m√°s limpio**: Solo lo necesario
- üéØ **Menos confusi√≥n**: No hay clases importadas que no se usan
- üéØ **Performance**: Menos clases cargadas en memoria

### Ejemplo 6: Proceso de Revisi√≥n - Eliminar C√≥digo Sin Usar

**üìã Flujo de Revisi√≥n:**

```
Controller ‚Üí Service (Interface) ‚Üí ServiceImpl ‚Üí Capacidades (Validation/Builder/etc.)
```

**Verificar cada capa:**

| Capa | Qu√© revisar | Acci√≥n |
|---|---|---|
| Controller | Endpoints, imports | Eliminar no usados |
| Service Interface | M√©todos declarados | ¬øTodos implementados y llamados? |
| ServiceImpl | Imports, m√©todos, constantes | Eliminar sin referencias |
| Capacidades | M√©todos p√∫blicos | ¬øTodos llamados desde coordinador? |
| Constants | Constantes | ¬øTodas usadas en alguna clase? |

**üìã Checklist (aplicar ANTES de guardar CUALQUIER clase):**

```
‚úÖ Imports sin usar eliminados (CR√çTICO - TODAS las clases)
   ‚îú‚îÄ Controllers (@RestController)
   ‚îú‚îÄ Services (@Service) y sus interfaces
   ‚îú‚îÄ DTOs (clases de datos)
   ‚îú‚îÄ Mappers (@Component)
   ‚îú‚îÄ Exceptions (clases de error)
   ‚îú‚îÄ Configuration (@Configuration)
   ‚îî‚îÄ Filters y otras clases Java
‚úÖ M√©todos privados sin llamar eliminados
‚úÖ Constantes sin usar eliminadas
‚úÖ Variables/par√°metros sin usar eliminados
‚úÖ C√≥digo comentado eliminado (usar Git)
‚úÖ TODOs resueltos o documentados
```

**‚ö†Ô∏è Se√±ales de c√≥digo sin usar:**

| Se√±al | Acci√≥n |
|---|---|
| Import gris en IDE | Eliminar import |
| M√©todo privado nunca llamado | Eliminar o hacer p√∫blico si es API |
| Constante sin referencias | Eliminar o documentar si es futura |
| Variable asignada pero nunca le√≠da | Eliminar asignaci√≥n |
| Par√°metro nunca usado | Eliminar par√°metro |
| C√≥digo comentado > 1 sprint | Eliminar (est√° en Git) |
| TODO > 3 meses | Resolver o crear ticket |

**üéØ Beneficios:**
- ‚úÖ **Mantenibilidad**: Sin c√≥digo confuso
- ‚úÖ **Performance**: Sin imports innecesarios
- ‚úÖ **Claridad**: Solo c√≥digo usado
- ‚úÖ **Refactorizaci√≥n segura**: Sin c√≥digo "zombie"

## üö´ Restricciones

1. **NO** mantener imports sin usar en NINGUNA clase (Controllers, Services, DTOs, Mappers, etc.) - ELIMINAR ANTES de guardar cambios
2. **NO** hardcodear strings literales (excepto logs con contexto √∫nico)
3. **NO** crear m√©todos > 50 l√≠neas (refactorizar obligatorio)
4. **NO** usar nombres gen√©ricos (`process()`, `handle()`, `execute()`, `doWork()`)
5. **NO** crear instancias m√∫ltiples de utilities (`new ObjectMapper()` en cada m√©todo)
6. **NO** usar magic numbers (usar constantes o `HttpStatus.OK.value()`)
7. **NO** incluir m√∫ltiples responsabilidades en un m√©todo o clase
8. **NO** omitir logs informativos en operaciones cr√≠ticas
9. **NO** crear mensajes de error sin c√≥digo estandarizado `ED-XXX-NN`
10. **NO** duplicar constantes entre clases (centralizar en `Constants.java`)
11. **NO** usar comentarios para explicar c√≥digo complejo (refactorizar el c√≥digo)
12. **NO** agrupar servicios sin separar por capacidades cuando hay ‚â•2 responsabilidades diferentes
13. **NO** mantener constantes, m√©todos privados o variables sin usar
14. **NO** dejar c√≥digo comentado sin explicaci√≥n por m√°s de 1 sprint (usar Git para historial)
15. **NO** dejar TODOs sin resolver por m√°s de 3 meses (resolver o crear ticket)

## ‚úÖ Validaci√≥n Autom√°tica

Cursor debe detectar:

**Imports Sin Usar (PRIORIDAD CR√çTICA):**
- ‚ùå Imports no utilizados en Controllers
- ‚ùå Imports no utilizados en Services e Interfaces
- ‚ùå Imports no utilizados en DTOs
- ‚ùå Imports no utilizados en Mappers
- ‚ùå Imports no utilizados en Exceptions
- ‚ùå Imports no utilizados en Configuration
- ‚ùå Imports no utilizados en cualquier clase `.java`

**Constantes:**
- ‚ùå Strings literales hardcodeados (excepto logs √∫nicos)
- ‚ùå Mensajes de error sin c√≥digo `ED-XXX-NN`
- ‚ùå C√≥digos de error duplicados entre m√≥dulos
- ‚ùå Constantes duplicadas en m√∫ltiples clases

**Single Responsibility:**
- ‚ùå M√©todos > 50 l√≠neas sin refactorizar
- ‚ùå M√©todos con m√∫ltiples `try-catch`, m√∫ltiples validaciones y m√∫ltiples transformaciones
- ‚ùå M√©todos que hacen m√°s de 3 operaciones principales
- ‚ùå Clases con m√∫ltiples responsabilidades (‚â•2 capacidades diferentes sin separar)

**Nombres:**
- ‚ùå Nombres gen√©ricos sin contexto (`process()`, `handle()`, `data`, `temp`, `aux`)
- ‚ùå Variables de una letra (excepto √≠ndices de bucles)
- ‚ùå Abreviaciones no est√°ndar (`usr`, `pwd`, `msg`)

**Reutilizaci√≥n:**
- ‚ùå `new ObjectMapper()` en m√©todos (usar campo inyectado)
- ‚ùå Validadores instanciados m√∫ltiples veces
- ‚ùå C√≥digo duplicado entre m√©todos

**C√≥digo Sin Usar (Adicional a Imports):**
- ‚ùå Constantes sin referencias en todo el proyecto
- ‚ùå M√©todos privados nunca llamados
- ‚ùå Variables declaradas pero nunca le√≠das
- ‚ùå Par√°metros sin usar en m√©todos
- ‚ùå C√≥digo comentado sin explicaci√≥n o > 1 sprint
- ‚ùå TODOs sin resolver > 3 meses

**Checklist de Refactorizaci√≥n (aplicar a CADA clase):**
- [ ] **Imports sin usar eliminados** (CR√çTICO - verificar en TODAS las clases)
- [ ] Strings literales extra√≠dos como constantes
- [ ] Mensajes de error en `Constants.java` con c√≥digos `ED-XXX-NN`
- [ ] M√©todos < 20 l√≠neas (m√°ximo 50)
- [ ] Cada m√©todo tiene UNA responsabilidad
- [ ] Cada clase tiene UNA responsabilidad (separar capacidades si hay ‚â•2)
- [ ] Nombres descriptivos sin comentarios explicativos
- [ ] `ObjectMapper` y utilities como campos reutilizables
- [ ] Sin c√≥digo duplicado
- [ ] Logs informativos en operaciones cr√≠ticas
- [ ] Status codes usando `HttpStatus` enum
- [ ] Sin magic numbers
- [ ] Capacidades separadas en carpetas propias si son reutilizables
- [ ] Sin constantes, m√©todos privados o variables sin usar
- [ ] C√≥digo comentado eliminado (usar Git para historial)
- [ ] TODOs resueltos o documentados

## üéØ Objetivo + Regla de Oro

**Objetivo**: Escribir c√≥digo limpio, mantenible y testeable aplicando principios SOLID, DRY y Clean Code con alta cohesi√≥n, bajo acoplamiento y sin c√≥digo muerto.

**REGLA DE ORO**: "PRIMERO: Eliminar imports sin usar en CADA clase ANTES de guardar. DESPU√âS: Un m√©todo = Una responsabilidad < 20 l√≠neas. Una clase = Una responsabilidad (‚â•2 capacidades ‚Üí separar). Strings ‚Üí Constantes en `Constants.java` con c√≥digo `ED-XXX-NN`. Nombres descriptivos. Utilities reutilizables. Capacidades independientes. C√≥digo limpio sin elementos sin usar."

---

> **Ver tambi√©n**: 
> - [servicios-01-creacion-servicios.mdc](./servicios-01-creacion-servicios.mdc) - Arquitectura en capas
> - [servicios-04-excepciones.mdc](./servicios-04-excepciones.mdc) - Manejo de excepciones
